<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <title>添加作业</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta content="" name="description"/>
    <meta content="" name="author"/>

    <!-- 开发智能提示需要，真正发布的时候需要删除-->
    <link href="resources/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME STYLES -->
    <link href="resources/assets/global/css/components.css" id="style_components" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
    <link id="style_color" href="resources/assets/admin/layout/css/themes/default.css" rel="stylesheet" type="text/css"/>
    <link href="resources/assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
    <link href="resources/css/workhour_manage.css" rel="stylesheet" type="text/css"/>

</head>
<body class="page-header-fixed page-quick-sidebar-over-content m-body-font">
<!--常用的公用的css-->
<div th:include="common::css"></div>
<!-- header -->
<div th:replace="header :: header"></div>
<!-- header结束 -->
<div class="clearfix"></div>
<div class="page-container">
    <!-- 侧边导航栏 -->
    <div th:replace="sidebar::sidebar"></div>

    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
            <div class="modal fade" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">Modal title</h4>
                        </div>
                        <div class="modal-body">
                            Widget settings form goes here
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn blue">Save changes</button>
                            <button type="button" class="btn default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->
            <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->

            <!-- BEGIN PAGE HEADER-->
            <h3 class="page-title">
                添加作业
            </h3>
            <div class="page-bar">
                <ul class="page-breadcrumb">
                    <li>
                        <i class="fa fa-home"></i>
                        <a href="assignment.do">作业管理</a>
                        <i class="fa fa-angle-right"></i>
                    </li>
                    <li>
                        <a href="#">添加作业</a>
                    </li>
                </ul>
            </div>
            <!-- END PAGE HEADER-->
            <!-- BEGIN PAGE CONTENT-->
            <!-- important 在这里开始正文的内容-->
            <div class="row">
                <div class="col-md-12">
                    <div class="portlet box blue">
                        <div class="portlet-title">
                            <div class="caption">发布作业</div>
                        </div>
                            <div class="portlet-body form">
                                <form  class="form-horizontal" role="form" method="post" id="add_assignment">
                                    <div class="form-body">
                                        <input type="hidden" name="courseId"  th:value="${course.id}"/>
                                        <div class="form-group">
                                            <label for="heading" class="col-md-2 control-label" >标题</label>
                                            <div class="col-md-4">
                                                <input class="form-control" type="text" name="heading" id="heading">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="description" class="col-md-2 control-label" >作业描述</label>
                                            <div class="col-md-4">
                                                <input class="form-control" type="textArea" name="description" id="description">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="startDate" class="col-md-2 control-label" >起始时间</label>
                                            <div class="col-md-4">
                                                <input class="form-control" type="text" name="startDate" id="startDate">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="endDate" class="col-md-2 control-label" >截止时间</label>
                                            <div class="col-md-4">
                                                <input class="form-control" type="text" name="endDate" id="endDate">
                                            </div>
                                        </div>
                                        <div class="form-group" th:if="${course.teamAllowed}">
                                            <label for="startDate" class="col-md-2 control-label" >是否为团队作业</label>
                                            <div class="control-group">
                                                <label class="radio-inline">
                                                    <input type="radio" name="isTeamwork" value="true" />是
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="isTeamwork" value="false" checked />否
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-offset-2 col-md-6">
                                                <button id="submit-btn" type="button" class="btn green" onclick="assign()">确认发布</button>
                                                <button id="return-btn" type="button" class="btn red col-md-offset-1" onclick="javascript:window.history.back(-1);">返回前页</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                    </div>
                </div>
            </div>

            <!-- END PAGE CONTENT-->
        </div>
    </div>
    <!-- END CONTENT -->
</div>
<!-- footer-->
<div th:replace="footer::footer"></div>
<!-- 把公用的js包含进来,包含一些初始化的工作 -->
<div th:include="common::js"></div>

</body>
<script type="application/javascript">
    function assign(){
        $.ajax({
            url:"save_assignment.do",
            type:"POST",
            data:$('#add_assignment').serialize(),
            dataType:"json",
            success: function() {
                layer.alert("发布成功")
            },
            error: function () {
                layer.alert("发布失败")
            }
        });
    }
    $(document).ready(function(){
        var datepicker = $('#startDate').datetimepicker({
            format: "yyyy-mm-dd hh:ii",
            startView:2,
            minView:0,
            maxView:2,
            minuteStep:15
        });
        var datepicker = $('#endDate').datetimepicker({
            format: "yyyy-mm-dd hh:ii",
            startView:2,
            minView:0,
            maxView:3,
            minuteStep:15
        });
        $('#startDate').datetimepicker('setDate', new Date());
        $('#endDate').datetimepicker('setDate', new Date());
    });
</script>
</html>
